# ğŸ’³ Referenced Payments API

API REST para la gestiÃ³n de **referencias de pago**, desarrollada con **Spring Boot 3.5.6**, **Java 17** y **PostgreSQL**.
Incluye autenticaciÃ³n **JWT**, pruebas unitarias con **JUnit/Mockito** y soporte para ejecuciÃ³n en **Docker**.

---

## ğŸš€ CaracterÃ­sticas principales

- AutenticaciÃ³n segura con JWT (`/authenticate`)
- CRUD completo de referencias de pago (`/v1/authenticate`)
- Persistencia en PostgreSQL
- Pruebas unitarias y de controladores
- ConfiguraciÃ³n lista para ejecuciÃ³n en Docker
- Compatible con Gradle y Java 17

---

## âš™ï¸ Requisitos previos

- **Java 17**
- **Gradle** (o usar el wrapper `./gradlew`)
- **Docker Desktop** (opcional, para ejecutar con contenedor)
- **PostgreSQL** (local o vÃ­a Docker)

---

## ğŸ—„ï¸ ConfiguraciÃ³n de base de datos

Este servicio usa **PostgreSQL** como base de datos principal.
Puedes ejecutar una instancia local o usar Docker.

### ğŸ”¹ OpciÃ³n 1 â€” Base de datos en Docker

Ejecuta el siguiente comando desde la raÃ­z del proyecto:

docker-compose up --build


### ğŸ‘¤ Usuario inicial para autenticaciÃ³n

Antes de iniciar la API, crea el usuario **admin** para poder generar tokens JWT.

Ejecuta en tu base de datos PostgreSQL:

```sql
INSERT INTO users (id, username, password, role)
VALUES (1, 'admin', '$2a$10$y4JGVByR76/yduFxf5EBS.g/e4HOlWO9VZxk01iM2gyX5TA/Houg2', 'ADMIN');

ğŸ” ContraseÃ±a: 123456


### â–¶ï¸ EjecuciÃ³n local
   ./gradlew clean build

La API estarÃ¡ disponible en:
ğŸ‘‰ http://localhost:8080

### ğŸ§  AutenticaciÃ³n JWT

Genera un token enviando una peticiÃ³n `POST` a `/authenticate`:

**Request body:**
```json
{
  "username": "admin",
  "password": "123456"
}

Copia el valor del campo jwt y Ãºsalo en las siguientes peticiones agregando el encabezado:

Authorization: Bearer <token>

---

### ğŸ“¡ Endpoints principales

    | **MÃ©todo** | **Endpoint** | **DescripciÃ³n** |
    |-------------|--------------|-----------------|
    | `GET` | `/health` | Verifica el estado de la API |
    | `POST` | `/authenticate` | Genera un token JWT |
    | `POST` | `/v1/payment` | Crea una nueva referencia |
    | `GET` | `/v1/payments/search?startCreationDate={{start_date}}&endCreationDate={{end_date}}&status={{status}}| Lista todas las referencias |
    | `GET` | `/vi/payment/{referenceId}/{paymentId}` | Consulta una referencia por ID |
    | `PUT` | `/v1/payment/cancel` | Actualiza una referencia |


---
## ğŸ³ EjecuciÃ³n con Docker

AsegÃºrate de tener Docker Desktop activo, y desde la raÃ­z del proyecto ejecuta:

docker-compose up --build

Esto levantarÃ¡ tanto la API como la base de datos PostgreSQL.

---

## ğŸ“¬ Postman Collection

La colecciÃ³n de pruebas se encuentra en:

/postman/ReferencedPaymentsAPI.postman_collection.json

Contiene:

AutenticaciÃ³n /authenticate

Health check /health

CRUD de referencias de pago

Importa el archivo en Postman y prueba todos los endpoints fÃ¡cilmente ğŸš€

--

## ğŸ“„ Licencia

Este proyecto fue desarrollado con fines educativos y de prÃ¡ctica profesional.
Â© 2025 - Referenced Payments API

--

## ğŸ’¡ Autor

Jeimmy Liliana Rache Camargo
Desarrolladora Backend - Java | Spring Boot
ğŸ“§ Contacto: https://github.com/LilianaRache

